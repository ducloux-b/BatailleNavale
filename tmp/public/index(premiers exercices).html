<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8">

		<title>Angular JS tests</title>
		

		<!-- sur angularjs.org dans download, le CDN -->
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.16/angular.min.js"></script>
		<script src="https://code.angularjs.org/1.3.16/angular-route.min.js"></script>

		<script src="app/app.js"></script>
		<script src="app/services/RequestService.js"></script>
		<script src="app/controllers/Ctrl.js"></script>
		<script src="app/controllers/HomeCtrl.js"></script>

		<style>
		.error {color:red;}
		input.ng-invalid{background-color: pink;}
		</style><!--les balises avec des propriétés ng, ont des styles par défaut associés: ng-invalid, ng-pristine,...-->

	</head>


	<div ng-app = "app">

		<ng-include src="'header.html'"></ng-include><!--le header-->

		<body>
			<div ng-view></div>
			<div ng-controller="Ctrl as ctrl">

				<input ng-model="ctrl.title">
				{{ctrl.title}}

				<form ng-submit="ctrl.nouvellePartie(formulairePartie)" name="formulairePartie" novalidate>
					<p>
						<label>
							Nom : <input required name="name" type="text" ng-model="ctrl.jeu.name" ng-model-options="{debounce :{default:1000}}"><!--on met un timer de màj à 3s, pour éviter d'engueuler la personne dès la première modif-->
						</label>
						<span class="error" ng-show="formulairePartie.name.$invalid && formulairePartie.$dirty">Champ Obligatoire</span>
					</p>
					<p>
						<label>
							E-mail : <input name="email" type="email" ng-model="ctrl.jeu.email" ng-model-options="{updateOn:'blur'}"><!--on valide ou pas quand il désélectionne ce champ-->
						</label>
					</p>
					<p>
						<label>
							Pseudo : <input name="pseudo" type="text" ng-minlength="5" ng-model="ctrl.jeu.pseudo">
						</label>
					</p>
					<p>
						<label>
							Champ de bataille :
							<input name="width" type="number" min="1" max="10" ng-model="ctrl.jeu.battlefieldSize.width"><input name="height" type="number" min="1" max="10" ng-model="ctrl.jeu.battlefieldSize.height">
						</label>
					</p>
					
					<p>
						<label>
							Nombre bateaux :
							<select required name="fleetSize" ng-model="ctrl.jeu.fleetSize" ng-options="s.valeur as s.label for s in ctrl.optionsNbBateaux">
							</select>
						</label>
					</p>

					<button type="submit" ng-disabled="formulairePartie.$invalid">Créer Partie</button>

					<!--<pre>{{ ctrl.optionsNbBateaux | json }}</pre>-->
					<pre>{{ ctrl.jeux | json }}</pre>
				</form>
			</div>
		</body>

		<ng-include src="'footer.html'"></ng-include><!--le footer-->
	</div>

</html>